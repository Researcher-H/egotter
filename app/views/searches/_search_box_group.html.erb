<% id_suffix = Random.rand(1000) %>

<label for="screen_name" class="sr-only">Twitter ID</label>
<div class="input-group">
  <div class="input-group-addon">@</div>
  <input type="search" id="screen-name-<%= id_suffix %>"
         name="screen_name"
         class="form-control"
         placeholder="Twitter ID"
         pattern="^[0-9A-Za-z_]{1,20}$"
         inputmode="verbatim"
         title="<%= t('before_sign_in.invalid_input', count1: 1, count2: 20) %>"
         required autofocus>
  <span class="input-group-btn">
    <button class="btn btn-primary" type="submit"><%= t('searches.new.search') %></button>
  </span>
</div>

<% if user_signed_in? && current_user.twitter_user %>
  <script>
    $(function () {
      var friends = <%= raw current_user.twitter_user.friends.pluck(:screen_name).to_json %>;
      $("#screen-name-<%= id_suffix %>").autocomplete({
        source: friends,
        minLength: 2
      });
    });
  </script>
<% end %>