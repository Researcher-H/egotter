- content_for :canonical_url do
  %link{href: cluster_url(@twitter_user), rel: 'canonical'}

- content_for :navbar_title, t(".navbar_title")

- breadcrumb :cluster, @twitter_user.screen_name

- page_title = t('.page_title', user: @twitter_user.screen_name, clusters: @cluster_names.take(3).join(' '))
- title page_title
- set_meta_tags description: t('clusters.show.description', user: @twitter_user.screen_name, clusters: @cluster_names.take(3).join(' '))

= render partial: 'twitter/profile', locals: {user: @twitter_user}

%h2.h4.text-center.my-5= page_title
.mb-5= t('clusters.show.page_description', user: @twitter_user.screen_name)

= render partial: 'common/search_form', locals: {via: current_via('top_input')}
= render(partial: 'adsense/ad', locals: {vertical: :top})

.share-buttons
  .inner
    - text = t('clusters.show.tweet', user: @twitter_user.screen_name, clusters: @cluster_names.take(3).join("\n"), url: cluster_url(@twitter_user))
    = render partial: 'twitter/tweet_button', locals: {text: text}

%h2.h3.text-center.mt-5= t('clusters.show.clusters_level')
#clusters-container.my-3
= render partial: 'twitter/tweet_box', locals: {text: text, twitter_user: @twitter_user}

%table.text-center.table.table-bordered.table-condensed
  %tr
    %th.text-secondary Cluster
  - @cluster_names.take(30).each do |cluster|
    %tr
      %td.text-secondary= cluster

:javascript
  $(function () {
      var options = $.extend(true, {}, window.usage_stats_column_chart_options);
      options.series[0].data = #{raw @graph.to_json};
      $('#clusters-container').highcharts(options);
  });
