- template_name = tweets_or_users[0].is_a?(TwitterDB::User) ? 'twitter/user' : 'twitter/tweet'
= render(partial: template_name, collection: tweets_or_users, cached: true, formats: %i(html))

- unless tweets_or_users.last_page?
  .loading-image.friends.see-more.text-center{data: {type: type, next_page: tweets_or_users.next_page}}= image_tag '/ajax-loader.gif'
  :javascript
    $(function () {
      var url = "#{friend_path(screen_name: twitter_user.screen_name, type: 'TYPE', page: 'NEXT_PAGE', format: :json)}";

      $('.loading-image.see-more')
        .lazyload()
        .one('appear', function () {
          var $tag = $(this);
          if (!$tag.data('appeared')) {
            $tag.data('appeared', true);

            $.get(url.replace('TYPE', $tag.data('type')).replace('NEXT_PAGE', $tag.data('next-page')))
              .done(function (res) {
                $tag.parent().append(res.html);
                $tag.remove();
              });
          }
        });
    });
