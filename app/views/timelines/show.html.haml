- content_for :canonical_url do
  %link{href: timeline_url(@twitter_user), rel: 'canonical'}

- content_for :navbar_title, t('.navbar_title', user: @twitter_user.screen_name)

- breadcrumb :timeline, @twitter_user.screen_name

- set_meta_tags title: t('.page_title', user: @twitter_user.screen_name, removing: @twitter_user.unfriendships.size, removed: @twitter_user.unfollowerships.size), site: '', description: t('.meta_description', user: @twitter_user.screen_name)

= render partial: 'adsense/ad', locals: {vertical: :top}

= render partial: 'shared/profile_section', locals: {twitter_user: @twitter_user, expanded: true}

%h2.h3.text-center.my-5= t('.heading', user: @twitter_user.screen_name)
.my-3= t('.this_page_is_html', user: @twitter_user.screen_name)

= render(partial: 'adsense/ad', locals: {vertical: :middle})

#timelines-show-container

:javascript
  $(function () {
    var url = '#{raw api_v1_timelines_path(uid: @twitter_user.uid)}';
    var errorMessage = '#{t('.loading_error_html', user: @twitter_user.screen_name)}';
    $.getJSON(url).done(function (res) {
      console.log('timelines', 'loaded');
      $('#timelines-show-container').html(res.html);
    }).fail(function (xhr) {
      console.warn('timelines', xhr.responseText);
      $('#timelines-show-container').html(errorMessage);
    });
  });
