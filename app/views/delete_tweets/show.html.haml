- modal_id = 'delete-tweets-modal'

- content_for :navbar_title, t('.navbar_title')

- breadcrumb :delete_tweets, current_user.screen_name

.text-center.my-1
  - if current_user.has_valid_subscription?
    = t('.eligible_for_premium', user: current_user.screen_name)
    %span.small.rounded.p-1{style: 'cursor: pointer; border: 1px solid rgba(0,0,0,.125);'}
      %i.far.fa-question-circle.text-muted
      = link_to t('.word_procedure'), '#download-full-archive', class: 'text-muted'
  - else
    = t('.warnings')[1]
    %span.small.rounded.p-1{style: 'cursor: pointer; border: 1px solid rgba(0,0,0,.125);'}
      %i.far.fa-question-circle.text-muted
      = link_to t('.word_description'), '#delete-tweets-faq', class: 'text-muted'

.text-center.mt-4.mb-5
  - if @processing
    .btn.btn-danger.disabled= t('.requested')
  - else
    .btn.btn-danger{"data-target" => "##{modal_id}", "data-toggle" => "modal"}= t('.modal_button_html', user: current_user.screen_name, icon: current_user_icon)

%h2.h4.text-center.mt-5.mb-4= t('.status.title')
.text-center.mb-3= t('.status.description', user: current_user.screen_name)
%table.table.table-bordered.table-condensed
  %tr
    - if @request
      - req = DeleteTweetsRequestDecorator.new(@request)
      %td= req.time
      %td= req.message
    - else
      %td.text-muted= t('.status.empty_date')
      %td.text-muted= t('.status.no_request_description', user: current_user.screen_name)

= render partial: 'delete_tweets/faq'

= modal_dialog(id: modal_id, title: t('.modal.title'), button: {positive: t('.modal.ok'), category: 'danger'}) do
  .mb-3= t('.modal.confirmation_html', user: current_user.screen_name, icon: current_user_icon)
  %strong.d-block.my-1= t('.warnings')[0]
  %strong.d-block.mt-1.mb-3= t('.warnings')[1]
  %div
    = check_box_tag('', '1', true, disabled: true)
    %label= t('.modal.dm_after_finishing')
  %div
    = check_box_tag('tweet-after-finishing', '1', true)
    %label{for: 'tweet-after-finishing'}= t('.modal.tweet_after_finishing')
  .my-3
    %small.form-text.text-muted= t('.modal.please_enter_confirmation_text')
    = text_field_tag '', '', class: 'form-control confirm-input', placeholder: ''

:javascript
  $(function () {
    var id = '#{modal_id}';
    var url = '#{delete_tweets_path}';
    var i18n = {
      pleaseEnterConfirmationText: '#{t('.modal.please_enter_confirmation_text')}',
      confirmationText: '#{t('.modal.confirmation_text')}'
    };
    new DeleteTweetsModal(id, url, i18n);
  });
