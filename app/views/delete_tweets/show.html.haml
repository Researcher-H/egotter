- modal_id = 'delete-tweets-modal'

- content_for :navbar_title, t('.navbar_title')

.text-center.my-5
  = image_tag '/egotter_trash_with_text_400x448.png', class: 'w-50', style: 'max-width: 200px;'

.text-center.my-5
  - if @processing
    .btn.btn-danger.btn-lg.disabled= t('.requested')
  - else
    .btn.btn-danger.btn-lg{"data-target" => "##{modal_id}", "data-toggle" => "modal"}= t('.delete_tweets', user: current_user.screen_name)

- if @logs&.any?
  %h2.h4.text-center.my-5= t('.status.title')
  .text-center.mb-3= t('.status.description', user: @current_user.screen_name)
  %table.text-center.table.table-bordered.table-condensed
    = render partial: 'log', collection: @logs, cached: true

.text-center.my-1
  %b= t('.modal.warning2')
.text-center.my-1
  %b= t('.modal.warning3')

= modal_dialog(id: modal_id, title: t('.modal.title'), button: {positive: t('.modal.ok'), category: 'danger'}) do
  .mb-3= t('.modal.warning1', user: current_user.screen_name)
  .my-1
    %b= t('.modal.warning2')
  .my-1
    %b= t('.modal.warning3')
  %div
    = check_box_tag('', '1', true, disabled: true)
    %label= t('.modal.dm_after_finishing')
  %div
    = check_box_tag('tweet-after-finishing', '1', true)
    %label{for: 'tweet-after-finishing'}= t('.modal.tweet_after_finishing')
  .my-3
    %small.form-text.text-muted= t('.modal.please_enter_confirmation_text')
    = text_field_tag '', '', class: 'form-control confirm-input', placeholder: ''

:javascript
  $(function () {
    var id = '#{modal_id}';
    var url = '#{delete_tweets_path}';
    var i18n = {
      pleaseEnterConfirmationText: '#{t('.modal.please_enter_confirmation_text')}',
      confirmationText: '#{t('.modal.confirmation_text')}'
    };
    new DeleteTweetsModal(id, url, i18n);
  });
